Let $d$ be a non-square integer. Then the [[Diophantine Equations|diophantine equation]] of the form $x^{2}-dy^{2}=\pm 1$ is called Pell's equation
## Solutions
All positive integer solutions $x-p$, $y=q$ of Pell;s equation $x^{2}-dy^{2}=\pm 1$ are among pairs $x=p_{k}$, $y=q_{k}$, where $\frac{p_{k}}{q_{k}}$ is a [[Convergents|convergent]] to the [[continued fraction]] expansion of $\sqrt{ d }$ 
This is a one way implication - not all convergents are solutions
### Proof
We will consider the case $x^{2}-dy^{2}=1$, here, if $x=p$, $y=q$ is a solution, then $p^{2}-dq^{2}=1$. Factorising we get $(p-\sqrt{ d }q)(p+\sqrt{ d }q)=1$. The right hand side is greater than 0, so $p+\sqrt{ d }q>0$. Hence $p>q\sqrt{ d }$. Consider
$$
\left| \frac{p}{q}-\sqrt{ d } \right|=\left| \frac{p-\sqrt{ d }q}{q} \right|=\left| \frac{(p-\sqrt{ d }q)(p+\sqrt{ d }q)}{q(p+\sqrt{ d }q)} \right|=\left| \frac{p^{2}-dq^{2}}{q(p+q\sqrt{ d })} \right|=\frac{1}{q(p+q\sqrt{ d })}<\frac{1}{2q(q\sqrt{ d })}<\frac{1}{2q^{2}}
$$
As $p>q\sqrt{ d }\implies p+\sqrt{ d }>2q\sqrt{ d }$
Hence, by this [[Convergents#For $x in mathbb{R} backslash mathbb{Q}$, if $ exists frac{a}{b} in mathbb{Q}$ ($b geq 1$) $ left x- frac{a}{b} right < frac{1}{2b {2}}$, then $ frac{a}{b}$ is one of the convergents of the continued fraction expansion of $x$|lemma]], $\frac{p}{q}$ must be a convergent of $\sqrt{ d }$
### How to tell which convergents work
Let $r$ be the length of the period of the continued fraction expansion of $\sqrt{ d }$. Then $p_{kr-1}^{2}-dq_{kr-1}^{2}=(-1)^{k}$, for $k \in\mathbb{Z}^+$
In particular, if $r$ is even, then $x^{2}-dy^{2}=-1$ has no solutions.
The positive integer solutions to $x^{2}-dy^{2}=1$ are kiven by $x=p_{kr-1}$, $y=q_{kr-1}$ $\forall k \in\mathbb{Z}^+$
Similarly if $r$ is odd, then $x=p_{kr-1}$, $y=q_{kr-1}$ give all integer solutions for:
- $x^{2}-dy^{2}=-1$ for $k$ being odd
- $x^{2}-dy^{2}=1$ for $k$ being even
## Finding all solutions
If $(x_{0},y_{0})$ is the smallest positive integer solution of $x^{2}-dy^{2}=1$ then all positive integer solutions are given by $(x_{n},y_{n}): x_{n}+y_{n}\sqrt{ d }=(x_{0}+y_{0}\sqrt{ d })^{n}$ for $n \in\mathbb{N}$ 
### Proof
First we check that $(x_{n},y_{n})$ is a solution. Note that $x_{n}+y_{n}\sqrt{ d }=(x_{0}+y_{0}\sqrt{ d })^{n}\implies x_{n}-y_{n}\sqrt{ d }=(x_{0}-y_{0}\sqrt{ d })^{n}$ by binomial expansion, hence:
$$
x_{n}^{2}-dy_{n}^{2}=(x_{n}-y_{n}\sqrt{ d })(x_{n}+y_{n}\sqrt{ d })=(x_{0}-y_{0}\sqrt{ d })^{n}(x_{0}+y_{0}\sqrt{ d })^{n}=(x_{0}^{2}-dy_{0}^{2})^{n}=1^{n}=1
$$
Which is what we want
Secondly we need to show that this way of generating $(x_{n},y_{n})$ obtains all positive integer solutions
Assume there is a positive solution $x=s$, $y=t$ that is not generated as part of the $(x_{n},y_{n})$ solution set. Note that $x^{2}-dy^{2}=1\implies(x-y\sqrt{ d })(x+y\sqrt{ d })=1$ which means for positive solutions, one factor must be greater than 1 and the other factor must be between 0 and 1
Hence $x_{0}+y_{0}\sqrt{ d }>1$ and $s+t\sqrt{ d }>1$
There must therefore be some integer $m$ such that:
$$
(x_{0}+y_{0}\sqrt{ d })^{m}<s+t\sqrt{ d }<(x_{0}+y_{0}\sqrt{ d })^{m+1}
$$
Now consider $(x_{0}+y_{0}\sqrt{ d })^{-m}$:
$$
(x_{0}+y_{0}\sqrt{ d })^{-m}=\frac{(x_{0}-y_{0}\sqrt{ d })^{m}}{(x_{0}+y_{0}\sqrt{ d })^{m}(x_{0}-y_{0}\sqrt{ d })^{m}}=\frac{(x_{0}-y_{0}\sqrt{ d })^{m}}{(x_{0}^{2}-dy_{0}^{2})^{m}}=(x_{0}-y_{0}\sqrt{ d })^{m}
$$
As the denominator is equal to $1^{m}$
Taking the above inequality and multiplying by $(x_{0}-y_{0}\sqrt{ d })^{m}$ gives:
$$
(x_{0}+y_{0}\sqrt{ d })^{m}<s+t\sqrt{ d }<(x_{0}+y_{0}\sqrt{ d })^{m+1}
$$
$$
\implies 1<(s+t\sqrt{ d })(x_{0}-y_{0}\sqrt{ d })^{m}<x_{0}+y_{0}\sqrt{ d }
$$
Let's consider the central expression here and define integers $a,b$ such that:
$$
a+b\sqrt{ d }=(s+t\sqrt{ d })(x_{0}-y_{0}\sqrt{ d })^{m}
$$
Multiplying through by conjugates, we get:
$$
a^{2}-b^{2}d=(s^{2}-t^{2}d)(x_{0}^{2}-y_{0}^{2}d)^{m}=1\times 1^{m}=1
$$
So $(a,b)$ is a solution of $x^{2}-dy^{2}=1$, such that $1<a+b\sqrt{ d }<x_{0}+y_{0}\sqrt{ d }$ (by definition of $a$ and $b$). If we can show $a$ and $b$ are positive integers, this will contradict the definition of $x_{0}$ and $y_{0}$:
$$
a+b\sqrt{ d }>1\implies0 <(a+b\sqrt{ d })^{-1}=a-b\sqrt{ d }<1
$$
$$
\implies a=\frac{1}{2}(a+b\sqrt{ d })+\frac{1}{2}(a-b\sqrt{ d })>\frac{1}{2}+0>0,
$$
$$
b\sqrt{ d }=\frac{1}{2}(a+b\sqrt{ d })-\frac{1}{2}(a-b\sqrt{ d })>\frac{1}{2}-\frac{1}{2}=0
$$
Hence $x=a$, $y=b$ is indeed a positive integer solution to $x^{2}-dy^{2}=1$ with $a+b\sqrt{ d }<x_{0}+y_{0}\sqrt{ d }$ giving a contradiction
Therefore all positive integer solutions are generated by $(x_{n},y_{n})$

#Mathematics #Fractions #Definition